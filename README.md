# Yonokomae

[![CI](https://github.com/F88/yonokomae/actions/workflows/ci.yml/badge.svg)](https://github.com/F88/yonokomae/actions/workflows/ci.yml)
[![CodeQL](https://github.com/F88/yonokomae/actions/workflows/github-code-scanning/codeql/badge.svg)](https://github.com/F88/yonokomae/actions/workflows/github-code-scanning/codeql)

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/F88/yonokomae)
[![codecov](https://codecov.io/gh/F88/yonokomae/graph/badge.svg?token=8BC900V3O3)](https://codecov.io/gh/F88/yonokomae)

Yono Komae War

This thought-provoking game explores the outcomes for two countries after 'The World Merger Battle' of the Heisei era (
å¹³æˆã®å¤§åˆä½µå¤§æˆ¦).

```txt
Note: This game is full of humorous jokes, but to be clear, it is not a deepfake or a mere fabrication.
```

![ykwar.png](./imgs/ykwar.png)

## ã€Œã‚ˆã®ã“ã¾ãˆã€ã®æ´»ç”¨è¡“10é¸

1. **ðŸ§‘â€ðŸŽ“ å°å­¦ç”Ÿã®ç¤¾ä¼šå­¦ç¿’ã«** â€” æ­´å²ã®è¬Žã‚’è§£ãæŽ¢åµã”ã£ã“ï¼ã€ŒYONOã¯ãªãœåˆä½µã—ãŸã®ï¼Ÿã€ã€ŒKOMAEã®äººå£ã¯ã“ã‚Œã‹ã‚‰ã©ã†ãªã‚‹ï¼Ÿã€ã¨ã„ã£ãŸã€èº«è¿‘ãªåœ°åŸŸã®è¬Žã‚’ã‚²ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰èª­ã¿è§£ãã€å¤ä¼‘ã¿ã®è‡ªç”±ç ”ç©¶ã«ï¼
2. **ðŸ›ï¸ æ”¿ç­–ç«‹æ¡ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«** â€”
   æœªæ¥ã®é¦–é•·ãŒèª•ç”Ÿï¼Ÿæž¶ç©ºã®ã‚·ãƒŠãƒªã‚ªä¸Šã§ã€Œè²¡æ”¿åŠ›ãŒä½Žä¸‹ã—ãŸKOMAEã‚’ç«‹ã¦ç›´ã™ã«ã¯ï¼Ÿã€ã€Œå¤§å›½ã«æŒŸã¾ã‚ŒãŸYONOãŒç”Ÿãæ®‹ã‚‹ã«ã¯ï¼Ÿã€ã¨ã„ã£ãŸé›£å•ã«æŒ‘æˆ¦ã€‚æœªæ¥ã®å¸‚é•·ã‚„æ”¿æ²»å®¶ã‚’è‚²ã¦ã‚‹ãŸã‚ã®æ•™æã«ã€‚
3. **ðŸ”® æœªæ¥äºˆæ¸¬ã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦** â€” AI vs.
   äººé–“ã®äºˆæ¸¬ãƒãƒˆãƒ«ï¼AIãŒæç¤ºã™ã‚‹æœªæ¥ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæžœã¨ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è©•ä¾¡ã‚’æ¯”è¼ƒã€‚äººé–“ã®ç›´è¦³ã‚„çŸ¥è¦‹ãŒã€AIã®äºˆæ¸¬ã‚’ã©ã‚Œã ã‘ä¸Šå›žã‚Œã‚‹ã‹ã‚’ç«¶ã†ã€æœªæ¥ã®AIé–‹ç™ºã‚³ãƒ³ãƒšã«ã€‚
4. **ðŸ¢ ä¼æ¥­ç ”ä¿®ã«** â€” æœ€å¼·ã®ãƒ“ã‚¸ãƒã‚¹æˆ¦ç•¥å®¶ã‚’è‚²æˆï¼ã€Œé™ã‚‰ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã§å¤§ä¼æ¥­ï¼ˆNPCï¼‰ã¨ã©ã†ä»˜ãåˆã†ã‹ï¼Ÿã€ã¨ã„ã†ã‚²ãƒ¼ãƒ ã®å•ã„ã¯ã€ãƒ“ã‚¸ãƒã‚¹ã®å ´ã§ç›´é¢ã™ã‚‹èª²é¡Œãã®ã‚‚ã®ã€‚æˆ¦ç•¥çš„æ€è€ƒã‚’ç£¨ããŸã‚ã®ç ”ä¿®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æ´»ç”¨ã€‚
5. **ðŸ’¼ å°±è·æ´»å‹•ã®è‡ªå·±åˆ†æžã«** â€”
   å›ã¯ã€Œã‚ˆã®ã€ã‚¿ã‚¤ãƒ—ï¼Ÿã€Œã“ã¾ãˆã€ã‚¿ã‚¤ãƒ—ï¼Ÿã‚²ãƒ¼ãƒ å†…ã®é¸æŠžã‚„è©•ä¾¡ã‚’é€šã—ã¦ã€è‡ªåˆ†ãŒã€ŒçŸ¥ç•¥ã¨å¤–äº¤ã€ã‚’å¥½ã‚€ã‚¿ã‚¤ãƒ—ã‹ã€ã€Œå°‘æ•°ç²¾é‹­ã§æ­£é¢çªç ´ã€ã‚’å¥½ã‚€ã‚¿ã‚¤ãƒ—ã‹ã€å®¢è¦³çš„ã«è‡ªå·±åˆ†æžã€‚é¢æŽ¥ã§ã®å¼·ã¿ç™ºè¦‹ã«å½¹ç«‹ã¦ã‚‹ã€‚
6. **ðŸ˜ï¸ åœ°åŸŸã®æ´»æ€§åŒ–ã«** â€”
   ã‚²ãƒ¼ãƒ ã‹ã‚‰ã€Œã”å½“åœ°ãƒ’ãƒ¼ãƒ­ãƒ¼ã€ãŒç”Ÿã¾ã‚Œã‚‹ï¼ã€Œã‚ˆã®ã€ã¨ã€Œã“ã¾ãˆã€ã®æˆ¦ã„ã®è¨˜éŒ²ã‚’ã‚‚ã¨ã«ã€å­ã©ã‚‚ãŸã¡ãŒã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒ³ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’è€ƒæ¡ˆã€‚åœ°åŸŸã®æ–°ã—ã„PRã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚„ã‚¤ãƒ™ãƒ³ãƒˆã®é¡Œæã¨ã—ã¦æ´»ç”¨ã€‚
7. **ðŸŽ“ å¤§å­¦ã®è¬›ç¾©ã«** â€” ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã¨æ­´å²å­¦ã®èžåˆï¼ã€ŒAIãŒæç¤ºã™ã‚‹æœªæ¥äºˆæ¸¬ã‚’ã©ã†è©•ä¾¡ã™ã‚‹ã‹ï¼Ÿã€ã¨ã„ã†å•ã„ã‚’ãƒ†ãƒ¼ãƒžã«ã€ãƒ‡ãƒ¼ã‚¿åˆ†æžã®è¬›ç¾©ã‚„æ­´å²ç¤¾ä¼šå­¦ã®ã‚¼ãƒŸã§æ´»ç”¨ã€‚
8. **ðŸŽ² ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ åŒ–ã«** â€” å®¶æ—ã§ãƒ¯ã‚¤ãƒ¯ã‚¤ã€é ­è„³æˆ¦ï¼ã‚²ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚«ãƒ¼ãƒ‰ã‚„ã‚³ãƒžã«ã—ã¦ã€ã‚¢ãƒŠãƒ­ã‚°ãªãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã«ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã€Œè¦³å¯Ÿè€…ã€ã¨ã—ã¦å‹æ•—ã‚’äºˆæƒ³ã™ã‚‹ã€Œã‚ˆã®ã“ã¾ãˆå¤§äºˆæƒ³ä¼šã€ã‚’é–‹å‚¬ã€‚
9. **ðŸ“– æ­´å²å‰µä½œã®é¡Œæã«** â€” å…¬å¼ã¯å›ãŒå‰µã‚‹ï¼ã‚²ãƒ¼ãƒ å†…ã§ç”Ÿæˆã•ã‚ŒãŸæ­´å²è¨˜éŒ²ã‚’å…ƒã«ã€å°èª¬ã‚„æ¼«ç”»ã€ã‚·ãƒ§ãƒ¼ãƒˆãƒ ãƒ¼ãƒ“ãƒ¼ã‚’å‰µä½œã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ•°ã ã‘ç•°ãªã‚‹æ­´å²ãŒç”Ÿã¾ã‚Œã‚‹ã€å£®å¤§ãªã€Œãƒžãƒ«ãƒã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã€‚
10. **ðŸ—£ï¸ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦** â€”
    ã€Œã‚‚ã—ã‚‚ã€ã‚ã®æ™‚ã€ã“ã†ã ã£ãŸã‚‰ï¼Ÿã€ã‚²ãƒ¼ãƒ ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæžœã‚’è©±é¡Œã«ã€å‹äººã‚„å®¶æ—ã¨ã€Œã‚‚ã—ã‚‚YONOãŒåˆä½µã—ãªã‹ã£ãŸã‚‰ï¼Ÿã€ã€Œã‚‚ã—ã‚‚KOMAEã«æ–°å¹¹ç·šãŒé€šã£ã¦ã„ãŸã‚‰ï¼Ÿã€ã¨ã„ã£ãŸä¼šè©±ã§ç››ã‚Šä¸ŠãŒã‚‹ã€‚

## ðŸ’Œ ãƒ•ã‚¡ãƒ³ãƒ¬ã‚¿ãƒ¼ ç´¹ä»‹

| å€‹äººã®æ„Ÿæƒ³                                                                                                                                                                                                                                                                                                                      | å€‹äºº                                  |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
| ðŸŽ‰ æœ€åˆã€ä½•ãŒé¢ç™½ã„ã®ã‹ã‚ã‹ã‚‰ãªã‹ã£ãŸã‘ã©ã€ã‚ˆã®è»ãŒAIã®äºˆæ¸¬ã«åã—ã¦å‹ã£ãŸæ™‚ã€ã‚ã£ã¡ã‚ƒèˆˆå¥®ã—ãŸï¼åƒ•ã®ã€Žã“ã£ã¡ãŒå‹ã¤ï¼ã€ã£ã¦äºˆæƒ³ãŒå½“ãŸã‚‹ã¨ã€ãªã‚“ã‹é ­ãŒã‚ˆããªã£ãŸæ°—ãŒã™ã‚‹ï¼                                                                                                                                                         | ðŸ§’ æœªæ¥ã®å¤©æ‰äºˆæ¸¬å¸«(10æ­³)             |
| ðŸŒ… å¨˜ã®ç¤¾ä¼šã®æŽˆæ¥­ã§ã€ŒYONOå¸‚ã®è­°å“¡æ•°ã€ã‚’èª¿ã¹ã¦ãŸã‚“ã§ã™ãŒã€ã“ã®ã‚²ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã®æ–¹ãŒæ–­ç„¶é¢ç™½ãã¦ã€‚å¨˜ã¨ä¸€ç·’ã«ã€Œã‚‚ã—ã‚‚ã‚ã®æ™‚ã€KOMAEãŒYONOã‚’å¸åŽåˆä½µã—ã¦ãŸã‚‰...ã€ã£ã¦è©±ã—åˆã£ã¦ãŸã‚‰ã€æ°—ã¥ã„ãŸã‚‰æœã§ã—ãŸã€‚                                                                                                                             | ðŸ‘¨â€ðŸ‘§ æ­´å²å¤§å¥½ããƒ‘ãƒ‘(42æ­³)               |
| ðŸ» æ¯Žæ—¥ä¼šç¤¾ã®é£²ã¿ä¼šã§ã‚„ã£ã¦ã¾ã™ã€‚AIã®è©•ä¾¡ãŒéƒ¨ä¸‹ã®è©•ä¾¡ã¨é‡ãªã£ã¦æ€–ã„...ã€‚ã§ã‚‚ã€éƒ¨é•·ã¯ã€Œã‚ˆã®ã€ã‚¿ã‚¤ãƒ—ã€æ–°äººã¯ã€Œã“ã¾ãˆã€ã‚¿ã‚¤ãƒ—ã£ã¦ä¾‹ãˆã‚‹ã¨ã€ãªãœã‹å…¨å“¡ç´å¾—ã—ã¦ãã‚Œã¦ã‚¦ã‚±ã‚‹ã€‚                                                                                                                                                        | ðŸº ãƒ“ãƒ¼ãƒ«ã‚’æ„›ã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒžãƒ³(38æ­³)   |
| ðŸ§  ã“ã®ã‚²ãƒ¼ãƒ ã€å…¨ç„¶æ“ä½œã§ããªã„ã®ã«ã‚„ã‚ã‚‰ã‚Œãªã„ï¼ã ã£ã¦ã€AIã®äºˆæ¸¬ã¨è‡ªåˆ†ã®äºˆæ¸¬ãŒä¸€è‡´ã—ãŸæ™‚ã®ã€Œãƒ•ãƒ³ã€ç§ã®è¦‹ç«‹ã¦é€šã‚Šã ãªã€æ„ŸãŒåŠç«¯ãªã„ã‚“ã§ã™ã€‚ã¾ã‚‹ã§æˆ¦å›½æ™‚ä»£ã®è»å¸«ã«ãªã£ãŸæ°—åˆ†ï¼ˆãŸã ã®ã‚ªã‚¿ã‚¯ã§ã™ï¼‰ã€‚                                                                                                                               | â™Ÿï¸ è‡ªç§°ãƒ»åœ¨å®…è»å¸«(25æ­³)               |
| ðŸ“Š ã€Œç¬¬äºŒæ¬¡ä¸–ç•Œå¤§åˆä½µå¤§æˆ¦ã€ã£ã¦ã€ãªã‚“ã‹èªžå‘‚ãŒè‰¯ã™ãŽã¦ã€æœ€è¿‘ã®ãƒ—ãƒ¬ã‚¼ãƒ³è³‡æ–™ã§ã“ã£ãã‚Šä½¿ã£ã¦ã¾ã™ã€‚ä¸Šå¸ã«ã€Œãã‚Œä½•ï¼Ÿã€ã£ã¦èžã‹ã‚Œã¦ã‚‚ã€ã€Œã“ã®ã‚²ãƒ¼ãƒ ã®ä¸–ç•Œè¦³ã§ã™ï¼ã€ã£ã¦è¨€ãˆã°è¨±ã•ã‚Œã‚‹ï¼ˆãŸã¶ã‚“ï¼‰ã€‚                                                                                                                                     | ðŸª„ ãƒ—ãƒ¬ã‚¼ãƒ³è³‡æ–™ã®é­”è¡“å¸«(29æ­³)         |
| ðŸ“Š æ°—ã¥ã„ãŸã‚‰ã€Œã‚ˆã®ã®å¤–äº¤ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã€ã¨ã€ŒKOMAEã®äººå£æŽ¨ç§»ã‚°ãƒ©ãƒ•ã€ã‚’iPadã§åŒæ™‚ã«é–‹ã„ã¦ã¾ã—ãŸã€‚ã‚‚ã†ã“ã‚Œã€ã‚²ãƒ¼ãƒ ã˜ã‚ƒãªãã¦è¶£å‘³ã§ã™ã­ã€‚æœ€è¿‘ã¯ã€YONOã¨KOMAEã®ã‚†ã‚‹ã‚­ãƒ£ãƒ©ã‚’å‹æ‰‹ã«æƒ³åƒã—ã¦ã€SNSã§æŠ•ç¨¿ã—ã¦ã¾ã™ã€‚                                                                                                                        | ðŸ“ˆ ãƒ‡ãƒ¼ã‚¿ã‚’æ„›ã™ã‚‹å¦„æƒ³å®¶(20æ­³)         |
| ðŸ” SNSã§è©±é¡Œã«ãªã£ã¦ã„ãŸã®ã§ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ãŸã‚‰ã€æ€ã£ã¦ã„ãŸã®ã¨å…¨ç„¶é•ã„ã¾ã—ãŸã­ã€‚ã“ã‚Œã€ã‚²ãƒ¼ãƒ ã¨ã„ã†ã‚ˆã‚Šã¯ã€æ­´å²ã®è£å´ã‚’è¦—ãè¦‹ã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ–‡çŒ®ã£ã¦æ„Ÿã˜ã§ã™ã€‚ç‰¹ã«ã€NPCã§ã‚ã‚‹Oã¨Uã®å‹•ãã‚’è¦³å¯Ÿã—ã¦ã€ãã®è£ã«ã‚ã‚‹æ€æƒ‘ã‚’è€ƒå¯Ÿã™ã‚‹ã®ãŒé¢ç™½ã„ã€‚è‡ªåˆ†ã®è€ƒå¯ŸãŒçµæžœã«åæ˜ ã•ã‚Œã‚‹ã¨ã€ã¾ã‚‹ã§è‡ªåˆ†ãŒæ­´å²ã®é»’å¹•ã«ãªã£ãŸã‚ˆã†ãªæ°—åˆ†ã«ãªã‚Šã¾ã™ã€‚ | ðŸ“š æ–‡å­¦ç³»ã‚²ãƒ¼ãƒžãƒ¼(32æ­³)               |
| âš¡ï¸ ã‚«ãƒŸãƒŠãƒªãƒžãƒ³ãŒã€ãƒ”ãƒ¼ãƒžãƒ³ãƒžãƒ³ã«å‹ã£ãŸã‚ˆï¼ãƒžãƒžã€è¦‹ã¦ï¼                                                                                                                                                                                                                                                                        | ðŸ‘¶ æˆ¦ã„ã®ç›®æ’ƒè€…(3æ­³)                  |
| ðŸŒŒ Oooh, aaah.                                                                                                                                                                                                                                                                                                                  | ðŸ‘¶ å®‡å®™ã®çœŸç†ã‚’æ‚Ÿã‚Šã—è€…(0æ­³)          |
| ðŸ¶ Wouf ! Wouf wouf !                                                                                                                                                                                                                                                                                                           | ðŸ• é£Ÿå¾Œã®æ•£æ­©ã‚’è¦æ±‚ã™ã‚‹æŸ´çŠ¬(å¹´é½¢ä¸è©³) |

## Architecture & Features

### pnpm Monorepo Structure

- **Application Package**: `@yonokomae/app` (React SPA)
- **Catalog Package**: `@yonokomae/catalog` (åˆ—æŒ™ / å®šæ•° / ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚«ã‚¿ãƒ­ã‚°)
- **Type Packages**: `@yonokomae/types` (åž‹), `@yonokomae/schema` (Zod ã‚¹ã‚­ãƒ¼ãƒž)
- **Data Packages**:
    - `@yonokomae/data-battle-seeds` - Statistical municipal comparison battles
    - `@yonokomae/data-historical-evidence` - Fictional historical scenarios
    - `@yonokomae/data-news-seeds` - News-style demonstration samples
- **Mock API**: `mock-api/` ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã‚¹ã‚¿ãƒ–ã‚µãƒ¼ãƒ
- **Operations**: `packages/app/src/ops/` - CLI tools for data analysis and export

ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€  (ç°¡æ˜“å›³):

```text
yonokomae/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â””â”€â”€ ops/         # CLI operational tools
â”‚   â”œâ”€â”€ catalog/
â”‚   â”œâ”€â”€ types/
â”‚   â””â”€â”€ schema/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ battle-seeds/
â”‚   â”œâ”€â”€ historical-evidence/
â”‚   â””â”€â”€ news-seeds/
â”œâ”€â”€ mock-api/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ data/                # Data-specific documentation
â”œâ”€â”€ e2e/
â”œâ”€â”€ dist/
â”‚   â”œâ”€â”€ ops/                 # Compiled ops scripts (legacy)
â”‚   â””â”€â”€ ops-build/           # New ops build output
â””â”€â”€ (no root src/; app code lives under packages/app/src/)
```

> Internal cross-package versions use `workspace:*`. The app depends on all; lower-level packages must not depend on `@yonokomae/app`.

- **Type Safety**: Shared TypeScript definitions (`@yonokomae/types`) and Zod validation schemas (`@yonokomae/schema`)
- **Data Maintenance**: Dedicated workflow for data contributors with comprehensive validation

### Application Features

- One-click battle report generation with smooth auto-scroll to latest
- Interactive user engagement components
    - Usage examples showcase with category-based organization
    - User testimonials with marquee animation effects
    - TSV export functionality for usage data and user voices
- Robust loading and error states
    - Async judgement with simulated latency
    - Shadcn skeleton placeholders on the battle field
    - Loading states with aria-busy for accessibility
    - Custom error classes for battle seed and news reporter repositories
- Modern UI stack
    - React 19 + Vite 7 + TypeScript, Tailwind CSS v4, shadcn/ui (New York)
    - Dark mode toggle via class-based theme
    - Responsive design with breakpoint-aware layouts
    - Font size control with keyboard shortcuts (Alt+Plus/Minus)
- Battle theming and significance levels
    - 8 theme categories (history, culture, community, etc.)
    - 4 significance levels (low, medium, high, legendary)
    - Visual indicators with chips and badges
- Repository-level battle filtering
    - `BattleFilter` component feeds `generateReport({ filter })`
    - Currently supports narrowing by `themeId`
    - Extensible: future fields (`significance`, explicit `id`) planned
- Enhanced battle title presentation
    - `BattleTitleChip` optionally shows a theme icon (`showThemeIcon`)
    - Consistent semantic labeling for accessibility
- Battle seed selector improvements
    - Optional `showIds` prop surfaces internal battle `id` values for debugging / reproducibility
    - Non-intrusive: disabled by default to keep UI concise
- Touch selection accuracy (iOS/WebKit)
    - Adjusted coordinate-based nearest mode correction prevents misaligned selection on iOS Safari
    - Logic activates only on real touch devices; no impact on desktop browsers
- Environment-driven configuration
    - Logging control via `VITE_ENABLE_LOGGING`
    - API base URL configuration
    - News mode configuration options
- Zero-SSR SPA optimized for client-side rendering
- GitHub Pages deployment with base path configured

## Accessibility (Screen Reader)

This game is designed with a Screen Reader-first mindset. Our goal is to
achieve full SR support across core flows. We commit to:

- Stable, concise accessible names for interactive controls
- Proper roles, labels, and descriptions (aria-label / aria-describedby)
- Keyboard-first operation with in-UI hints for shortcuts
- Landmarks and focus management for predictable navigation
- Tests that assert accessibility surfaces (getByRole with name), not visuals
- Respect reduced-motion preferences and avoid information conveyed by visuals only

Status: in progress. We track improvements under the Accessibility section of
the roadmap below and in the developer guides. Contributions to A11y are very
welcome.

### Production vs Test Instrumentation

Some legacy E2E specs depended on a dev/test-only global counter used to tally
mode selections. These were removed to keep production E2E parity: tests now
assert observable UI outcomes rather than internal counters.

## Reduced Motion (prefers-reduced-motion)

We honor the user's reduced motion preference to minimize unnecessary
animations and auto-scrolling. Key points:

- Smooth scrolling falls back to minimal or instant movement when motion is
  reduced. See `src/lib/scroll.ts` and `src/lib/reduced-motion.ts`.
- Marquee and entrance/exit animations shorten or disable under
  `@media (prefers-reduced-motion: reduce)`. See
  `src/components/UserVoicesMarquee.css` and
  `src/components/UsageExamplesMarquee.css`.
- Auto-playing carousels pause/disable autoplay when motion is reduced. See
  `src/components/UserVoicesCarousel.tsx`.

Tip (macOS): System Settings > Accessibility > Display > Reduce motion.

## Documentation

### For Developers

- [Developer guide (EN)](./docs/DEVELOPMENT_EN.md)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰ (JA)](./docs/DEVELOPMENT_JA.md)
- [Testing guide (EN)](./docs/TESTING.md)
- [Contributing guide (en)](CONTRIBUTING_EN.md)
- [Contributing guide (ja)](CONTRIBUTING_JA.md)

### Data & Ops CLI (Analysis)

Operational scripts for exporting and analyzing data live under `packages/app/src/ops/` and are exposed via `pnpm` scripts.

Common commands:

```bash
# Export all battle seeds to JSON (pretty printed)
pnpm run ops:export-battle-seeds-to-json -- out/battles.json

# Analyze battle seeds (loads dist modules directly)
pnpm run ops:analyze-battle-seeds

# Analyze previously exported JSON file
pnpm run ops:analyze-battle-seeds -- out/battles.json

# JSON formatted analysis output (machine-readable)
pnpm run ops:analyze-battle-seeds -- --format=json

# Export usage examples to TSV
pnpm run ops:export-usage-examples-to-tsv -- out/usage-examples.tsv

# Export user voices to TSV
pnpm run ops:export-users-voice-to-tsv -- out/users-voice.tsv

# Show help for any ops command
pnpm run ops:analyze-battle-seeds -- --help
```

The analyzer prints:

- Totals
- Distribution by theme and significance
- Theme Ã— Significance cross-tab matrix
- Power statistics (min / max / avg for komae, yono, combined)
- Top 5 battles by combined power

Use the `--format=json` flag for structured automation/CI pipelines (e.g., trend diffing or regression detection on seed distributions).

### For Data Maintainers

- [Data Maintenance Guide (EN)](./docs/DATA_MAINTENANCE_EN.md)
- [ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¬ã‚¤ãƒ‰ (JA)](./docs/DATA_MAINTENANCE_JA.md)
- [Battle Seeds Guide](./docs/data/BATTLE_SEEDS_EN.md)
- [Historical Evidence Guide](./docs/data/HISTORICAL_EVIDENCE_SEEDS_EN.md)
- [News Seeds Guide](./docs/data/NEWS_SEEDS_EN.md)

## Deployment (Summary)

Static SPA deployed to GitHub Pages at `/yonokomae/` using scripts:

| Script                    | Purpose                                                           |
| ------------------------- | ----------------------------------------------------------------- |
| `pnpm run build:ghpages`  | Build all packages, build app with base path, generate `404.html` |
| `pnpm run deploy:ghpages` | Build + publish `packages/app/dist` to `gh-pages`                 |

Essential rules: set `VITE_BASE_PATH=/yonokomae/`, publish `packages/app/dist`, duplicate `index.html` â†’ `404.html`.

Full details, troubleshooting matrix, and manual workflow: see [Deployment Guide](./docs/DEPLOYMENT_EN.md).

## Roadmap

### Completed Features

#### Architecture & Infrastructure

- âœ… **pnpm Monorepo**: Clean separation of concerns with independent data packages
- âœ… **Type Safety**: Unified type system with `@yonokomae/types` and `@yonokomae/schema`
- âœ… **Data Package System**: Independent validation and testing for each data domain

#### Game Features

- âœ… Historical Evidence mode with curated event data from `@yonokomae/data-historical-evidence`
- âœ… Battle Seeds mode using real municipal data from `@yonokomae/data-battle-seeds`
- âœ… News mode with sample content from `@yonokomae/data-news-seeds`
- âœ… Multiple play modes: demo (JA/EN/DE), historical-research, yk-now
- âœ… Repository pattern with lazy-loading and code splitting
- âœ… Seed system for deterministic battle generation
- âœ… TSV export functionality for usage data and user voices
- âœ… Battle theming system with 8 categories
- âœ… Significance levels for battle importance (low to legendary)

#### Quality & Testing

- âœ… Comprehensive test coverage (unit, integration, E2E, data validation)
- âœ… E2E tests for key flows (Playwright)
- âœ… Automated data package validation with CI checks
- âœ… Schema validation for all data entries using Zod
- âœ… Vitest with isolated test projects (unit and Storybook)
- âœ… Component testing in real browser environment
- âœ… Central Vitest workspace configuration for project management
- âœ… Accessibility testing with axe-core/playwright
- âœ… Seedable shuffle utilities with regression guards

### In Progress

- Surface provenance/notes in the UI (citations, links, disclaimers)
- Replace placeholder images with licensed assets and show attribution

### Planned

- **Data Maintenance Enhancements**
    - Data package dependency optimization
    - Enhanced validation rules for data quality
    - Automated data migration tools
- **Accessibility improvements**
    - A11y audit (labels, focus management, contrast)
    - Improve keyboard flow after generating a report (focus return/announce)
- **Internationalization**
    - Localize UI strings (EN/JA alignment with docs)
- **Testing enhancements**
    - Optional visual regression for core components
    - Enhanced data package integration testing

## Project notes

See the developer guides linked above for technical implementation details.

| Icon 1                                         | Icon 2                                         | Icon 3                                         |
| ---------------------------------------------- | ---------------------------------------------- | ---------------------------------------------- |
| ![ykw-icon-6.png](./imgs/icons/ykw-icon-6.png) | ![ykw-icon-4.png](./imgs/icons/ykw-icon-4.png) | ![ykw-icon-7.png](./imgs/icons/ykw-icon-7.png) |
