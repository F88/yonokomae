import{_ as g,a as y,b,c as h,d as w,e as v,f as j,g as K,h as R}from"./config-r6H3Wq70.js";import{y as c,z as B,u as F}from"./index-WruFkQvO.js";import{a as O}from"./delay-utils-lugK4fzg.js";class k{async getKomaeBase(){const e=await p("komae");return e[Math.floor(Math.random()*e.length)]}async getYonoBase(){const e=await p("yono");return e[Math.floor(Math.random()*e.length)]}}class P{seedFile;delay;constructor(e){this.seedFile=e?.seedFile,this.delay=e?.delay}async generateReport(e){await O(this.delay,e?.signal);let r="",o="",t="",a="",s=[];if(this.seedFile||c.length>0)try{const u=this.seedFile??c[Math.floor(Math.random()*c.length)]?.file;if(u){const d=(await B(u)).default;o=d.title,t=d.subtitle,r=d.overview,a=d.narrative,s=d.provenance??[]}}catch{}o||(o="Random Joke Data",t="",r="",a="",s=[]);const i=new k,[m,_]=await Promise.all([i.getKomaeBase(),i.getYonoBase()]),l=await D(),f=l.attribution;return{id:F("battle"),title:o,subtitle:t,overview:r,scenario:a,komae:{...m,description:`${m.description} — ${f}`,power:l.defaultPower},yono:{..._,description:`${_.description} — ${f}`,power:l.defaultPower},provenance:[...this.seedFile?[{label:"Selected seed (ignored for humor mode)",note:this.seedFile}]:[],...s],status:"success"}}}async function p(n){const e=`/seeds/random-data/neta/${n}.json`,r=`/src/seeds/random-data/neta/${n}.en.ts`,o=`/src/seeds/random-data/neta/${n}.ts`,t={...Object.assign({}),...Object.assign({"/src/seeds/random-data/neta/komae.en.ts":R,"/src/seeds/random-data/neta/komae.ja.ts":K,"/src/seeds/random-data/neta/komae.ts":j,"/src/seeds/random-data/neta/yono.en.ts":v,"/src/seeds/random-data/neta/yono.ja.ts":w,"/src/seeds/random-data/neta/yono.ts":h})},a=t[e]??t[r]??t[o],s=a?.default?.options??a?.options??[];return s.length>0?s:[{imageUrl:"about:blank",title:n==="komae"?"Komae":"Yono",subtitle:"Default",description:"No neta seeds found."}]}async function D(){const n="/seeds/random-data/report/config.json",e="/src/seeds/random-data/report/config.en.ts",r="/src/seeds/random-data/report/config.ts",o={...Object.assign({}),...Object.assign({"/src/seeds/random-data/report/config.en.ts":b,"/src/seeds/random-data/report/config.ja.ts":y,"/src/seeds/random-data/report/config.ts":g})},t=o[n]??o[e]??o[r];let a={};if(t!=null){const s=t;a=typeof t=="object"&&t!==null&&"default"in s?s.default??{}:t}return{attribution:a.attribution??"Images: placeholders (https://placehold.co/)",defaultPower:typeof a.defaultPower=="number"?a.defaultPower:50}}export{P as BattleReportRandomDataRepository,k as RandomJokeNetaRepository};
