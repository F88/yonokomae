import{a as c}from"./delay-utils-lugK4fzg.js";import{l as d}from"./battle-seed-loader-C2ZO7iGb.js";import"./config-r6H3Wq70.js";import"./index-CtzVlGtf.js";class g{file;delay;constructor(e){this.file=e?.file,this.delay=e?.delay}async generateReport(e){return await c(this.delay,e?.signal),d({roots:["/seeds/historical-evidences/battle/","/src/seeds/historical-evidences/battle/"],file:this.file})}}class O{delay;rng;constructor(e){this.delay=e?.delay,this.rng=e?.rng??Math.random}async determineWinner(e,r){await c(this.delay,r?.signal);const t=this.rng(),o=p(e.judge.codeName,t,e.battle.yono,e.battle.komae),a=(e.judge.codeName??"").trim().toUpperCase(),n=e.battle.yono.power-e.battle.komae.power,l=(a==="O"||a==="U")&&t<.2||(a==="S"||a==="C")&&t<.2||a==="KK"&&t<.9?"bias-hit":"power";return{winner:o,reason:l,rng:t,judgeCode:a,powerDiff:n}}}function i(s,e){return s.power>e.power?"YONO":s.power<e.power?"KOMAE":"DRAW"}function p(s,e,r,t){switch((s??"").trim().toUpperCase()){case"O":return e<.2?"YONO":i(r,t);case"U":return e<.2?"YONO":i(r,t);case"S":return e<.2?"KOMAE":i(r,t);case"C":return e<.2?"KOMAE":i(r,t);case"KK":return e<.9?"KOMAE":i(r,t);default:return i(r,t)}}export{g as HistoricalEvidencesBattleReportRepository,O as HistoricalEvidencesJudgementRepository};
