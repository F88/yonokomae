import{u as l}from"./index-n1uEafDY.js";import{a as p}from"./delay-utils-lugK4fzg.js";class m{constructor(i,o){this.pack=i,this.delay=o?.delay}async generateReport(i){const o=i?.signal,s=i?.filter;await p(this.delay,o);let e=this.pack.patterns;const a=s?.battle?.themeId,n=s?.battle?.id,c=s?.battle?.significance;if(a&&(e=e.filter(r=>r.themeId===a)),n&&(e=e.filter(r=>r.id===n)),c&&(e=e.filter(r=>r.significance===c)),e.length===0)return{id:l("battle"),themeId:"history",significance:"low",publishState:"published",title:"No Patterns Available",subtitle:"",narrative:{overview:"",scenario:""},yono:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},komae:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},status:"success",provenance:[]};const u=Math.floor(Math.random()*e.length),t=e[u];return t?{id:l("battle"),themeId:t.themeId,significance:t.significance,publishState:"published",title:t.title,subtitle:t.subtitle,narrative:{overview:t.overview,scenario:t.scenario},yono:t.yono,komae:t.komae,status:"success"}:{id:l("battle"),themeId:"history",significance:"low",publishState:"published",title:"Pattern Load Error",subtitle:"",narrative:{overview:"",scenario:""},yono:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},komae:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},status:"error",provenance:[]}}}class f{constructor(i){this.delay=i?.delay}async determineWinner(i,o){await p(this.delay,o?.signal);const{yono:s,komae:e}=i.battle,a=s.power-e.power;return{winner:a===0?"DRAW":a>0?"YONO":"KOMAE",reason:"power",powerDiff:a}}}export{m as D,f as a};
