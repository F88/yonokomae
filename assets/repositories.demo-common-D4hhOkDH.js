import{u as l}from"./index-CkuPBB-Q.js";import{a as d}from"./delay-utils-lugK4fzg.js";class f{delay;pack;constructor(i,o){this.pack=i,this.delay=o?.delay}async generateReport(i){const o=i?.signal,r=i?.filter;await d(this.delay,o);let e=this.pack.patterns;const a=r?.battle?.themeId,s=r?.battle?.id,c=r?.battle?.significance;if(a&&(e=e.filter(n=>n.themeId===a)),s&&(e=e.filter(n=>n.id===s)),c&&(e=e.filter(n=>n.significance===c)),e.length===0)return{id:l("battle"),themeId:"history",significance:"low",title:"No Patterns Available",subtitle:"",narrative:{overview:"",scenario:""},yono:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},komae:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},status:"success",provenance:[]};const u=Math.floor(Math.random()*e.length),t=e[u];return t?{id:l("battle"),themeId:t.themeId,significance:t.significance,title:t.title,subtitle:t.subtitle,narrative:{overview:t.overview,scenario:t.scenario},yono:t.yono,komae:t.komae,status:"success"}:{id:l("battle"),themeId:"history",significance:"low",title:"Pattern Load Error",subtitle:"",narrative:{overview:"",scenario:""},yono:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},komae:{imageUrl:"about:blank",title:"",subtitle:"",description:"",power:50},status:"error",provenance:[]}}}class y{delay;constructor(i){this.delay=i?.delay}async determineWinner(i,o){await d(this.delay,o?.signal);const{yono:r,komae:e}=i.battle,a=r.power-e.power;return{winner:a===0?"DRAW":a>0?"YONO":"KOMAE",reason:"power",powerDiff:a}}}export{f as D,y as a};
